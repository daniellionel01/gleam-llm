<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Implementation Validity by Case</title>
    <style>
      html,
      body {
        font-family:
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
        margin: 0;
      }
      .app {
        display: grid;
        grid-template-columns: 220px 1fr;
        min-height: 100vh;
      }
      /* Sidebar */
      .sidebar {
        border-right: 1px solid #ddd;
        padding: 12px;
      }
      .sidebar h2 {
        font-size: 14px;
        margin: 0 0 8px;
      }
      .sidebar .case-link {
        display: block;
        padding: 6px 8px;
        border-radius: 6px;
        text-decoration: none;
        color: #000;
        border: 1px solid transparent;
      }
      .sidebar .case-link:hover {
        background: #f3f3f3;
      }
      /* Main */
      .main {
        padding: 16px;
      }
      .case {
        display: none;
      }
      /* Radio controls – visually hidden */
      input[name="case"] {
        position: absolute;
        left: -9999px;
      }

      /* Show the right section when a radio is checked */
      #case-hello:checked ~ .app #view-hello {
        display: block;
      }
      #case-defer:checked ~ .app #view-defer {
        display: block;
      }

      /* Highlight the active case in the sidebar (no JS) */
      #case-hello:checked ~ .app .sidebar label[for="case-hello"],
      #case-defer:checked ~ .app .sidebar label[for="case-defer"] {
        background: #e9f3ff;
        border: 1px solid #bcd7ff;
        font-weight: 600;
      }

      /* Table */
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
        vertical-align: top;
      }
      th {
        background: #fafafa;
      }
      .valid-true {
        color: #0a6e0a;
        font-weight: 600;
      }
      .valid-false {
        color: #b00000;
        font-weight: 600;
      }
      .btn {
        display: inline-block;
        padding: 4px 8px;
        border: 1px solid #888;
        border-radius: 4px;
        text-decoration: none;
        color: #000;
        background: #f7f7f7;
      }
      .btn:hover {
        background: #eee;
      }

      /* Modal via :target */
      .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.4);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 16px;
      }
      .modal:target {
        display: flex;
      }
      .modal .box {
        background: #fff;
        max-width: 900px;
        width: 100%;
        max-height: 85vh;
        border: 1px solid #ccc;
        border-radius: 8px;
        overflow: auto;
      }
      .modal header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 12px;
        border-bottom: 1px solid #eee;
      }
      .modal header h3 {
        font-size: 15px;
        margin: 0;
      }
      .modal .body {
        padding: 12px;
      }
      .modal .close {
        text-decoration: none;
        padding: 4px 8px;
        border: 1px solid #888;
        border-radius: 4px;
        color: #000;
        background: #f7f7f7;
      }
      pre {
        margin: 0;
        white-space: pre;
        overflow: auto;
      }
    </style>
  </head>
  <body>
    <!-- Radio controls (no JS) -->
    <input type="radio" name="case" id="case-hello" checked />
    <input type="radio" name="case" id="case-defer" />

    <div class="app">
      <aside class="sidebar">
        <h2>Cases</h2>
        <label class="case-link" for="case-hello">Hello World!</label>
        <label class="case-link" for="case-defer">Defer</label>
      </aside>

      <main class="main">
        <!-- Hello World! -->
        <section id="view-hello" class="case">
          <h1 style="font-size: 18px; margin: 0 0 12px">Case: Hello World!</h1>
          <table>
            <thead>
              <tr>
                <th style="width: 40%">model</th>
                <th style="width: 10%">valid</th>
                <th>code</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>gpt-4o-2024-11-20</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-gpt4o">View code</a></td>
              </tr>
              <tr>
                <td>o4-mini-2025-04-16</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-o4mini">View code</a></td>
              </tr>
              <tr>
                <td>claude-3-7-sonnet-20250219</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-claude37">View code</a></td>
              </tr>
              <tr>
                <td>claude-sonnet-4-20250514</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-claude4">View code</a></td>
              </tr>
              <tr>
                <td>gemini-2.5-flash-preview-05-20</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-gemflash">View code</a></td>
              </tr>
              <tr>
                <td>gemini-2.5-pro-preview-06-05</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-hello-gempro">View code</a></td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Defer -->
        <section id="view-defer" class="case">
          <h1 style="font-size: 18px; margin: 0 0 12px">Case: Defer</h1>
          <table>
            <thead>
              <tr>
                <th style="width: 40%">model</th>
                <th style="width: 10%">valid</th>
                <th>code</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>gpt-4o-2024-11-20</td>
                <td class="valid-false">false</td>
                <td><a class="btn" href="#code-defer-gpt4o">View code</a></td>
              </tr>
              <tr>
                <td>o4-mini-2025-04-16</td>
                <td class="valid-false">false</td>
                <td><a class="btn" href="#code-defer-o4mini">View code</a></td>
              </tr>
              <tr>
                <td>claude-3-7-sonnet-20250219</td>
                <td class="valid-false">false</td>
                <td><a class="btn" href="#code-defer-claude37">View code</a></td>
              </tr>
              <tr>
                <td>claude-sonnet-4-20250514</td>
                <td class="valid-true">true</td>
                <td><a class="btn" href="#code-defer-claude4">View code</a></td>
              </tr>
              <tr>
                <td>gemini-2.5-flash-preview-05-20</td>
                <td class="valid-false">false</td>
                <td><a class="btn" href="#code-defer-gemflash">View code</a></td>
              </tr>
              <tr>
                <td>gemini-2.5-pro-preview-06-05</td>
                <td class="valid-false">false</td>
                <td><a class="btn" href="#code-defer-gempro">View code</a></td>
              </tr>
            </tbody>
          </table>
        </section>
      </main>
    </div>

    <!-- Modals -->
    <div id="code-hello-gpt4o" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — gpt-4o-2024-11-20</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-hello-o4mini" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — o4-mini-2025-04-16</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-hello-claude37" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — claude-3-7-sonnet-20250219</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-hello-claude4" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — claude-sonnet-4-20250514</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-hello-gemflash" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — gemini-2.5-flash-preview-05-20</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-hello-gempro" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Hello World! — gemini-2.5-pro-preview-06-05</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn main() {
  io.println("hello, world!")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-gpt4o" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — gpt-4o-2024-11-20</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn defer(callback: fn() -> Nil) -> fn() -> Nil {
  fn() { callback() }
}

pub fn main() {
  let deferred = defer(fn() { io.println("hello") })
  io.println("1")
  deferred()
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-o4mini" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — o4-mini-2025-04-16</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>pub fn defer(main_fn: fn() -> Nil, cleanup: fn() -> Nil) {
  main_fn()
  cleanup()
}

import gleam/io

pub fn main() {
  defer(
    fn() { io.println("1") },
    fn() { io.println("hello") },
  )
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-claude37" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — claude-3-7-sonnet-20250219</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

fn main() {
  use <- defer(fn() { io.println("hello") })
  io.println("1")
}

pub fn defer(deferred: fn() -> a, next: fn() -> b) -> b {
  let result = next()
  deferred()
  result
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-claude4" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — claude-sonnet-4-20250514</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn defer(cleanup: fn() -> Nil, callback: fn() -> a) -> a {
  let result = callback()
  cleanup()
  result
}

pub fn main() {
  use <- defer(fn() { io.println("hello") })
  io.println("1")
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-gemflash" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — gemini-2.5-flash-preview-05-20</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

/// Defers the execution of a given function until the current scope exits.
pub fn defer(action: fn() -> Nil) -> fn() -> Nil {
  fn() { action() }
}

pub fn main() {
  io.println("1")
  use _ = defer(fn() { io.println("hello") })
}</code></pre>
        </div>
      </div>
    </div>

    <div id="code-defer-gempro" class="modal" aria-modal="true" role="dialog">
      <div class="box">
        <header>
          <h3>Defer — gemini-2.5-pro-preview-06-05</h3>
          <a class="close" href="#">Close</a>
        </header>
        <div class="body">
          <pre><code>import gleam/io

pub fn defer(action: fn() -> a) -> fn(fn() -> b) -> b {
  fn(body: fn() -> b) -> b {
    let result = body()
    let _ = action()
    result
  }
}

pub fn main() {
  use <- defer(fn() { io.println("hello") })
  io.println("1")
}</code></pre>
        </div>
      </div>
    </div>
  </body>
</html>
